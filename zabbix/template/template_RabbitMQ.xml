<?xml version="1.0" ?>
<zabbix_export>
	<version>4.2</version>
	<date>2017-01-01T01:01:01Z</date>
	<groups>
		<group>
			<name>D. Paas Apps Projects</name>
		</group>
		<group>
			<name>Templates</name>
		</group>
	</groups>
	<templates>
		<template>
			<template>RabbitMQ</template>
			<name>RabbitMQ</name>
			<description/>
			<groups>
				<group>
					<name>D. Paas Apps Projects</name>
				</group>
				<group>
					<name>Templates</name>
				</group>
			</groups>
			<applications>
				<application>
					<name>RabbitMQ</name>
				</application>
			</applications>
			<items>
				<item>
					<name>RabbitMQ Disk Alarm</name>
					<type>0</type>
					<snmp_community/>
					<snmp_oid/>
					<key>influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT max(disk_free_alarm) FROM rabbitmq_node WHERE namespace = '{$RABBIT_NAMESPACE}' AND  time &gt;= now() - 90s&quot;]</key>
					<delay>30s</delay>
					<history>90d</history>
					<trends>365d</trends>
					<status>0</status>
					<value_type>0</value_type>
					<allowed_hosts/>
					<units/>
					<snmpv3_contextname/>
					<snmpv3_securityname/>
					<snmpv3_securitylevel>0</snmpv3_securitylevel>
					<snmpv3_authprotocol>0</snmpv3_authprotocol>
					<snmpv3_authpassphrase/>
					<snmpv3_privprotocol>0</snmpv3_privprotocol>
					<snmpv3_privpassphrase/>
					<params/>
					<ipmi_sensor/>
					<authtype>0</authtype>
					<username/>
					<password/>
					<publickey/>
					<privatekey/>
					<port/>
					<description/>
					<inventory_link>0</inventory_link>
					<applications>
						<application>
							<name>RabbitMQ</name>
						</application>
					</applications>
					<valuemap/>
					<logtimefmt/>
					<preprocessing/>
					<jmx_endpoint/>
					<timeout>3s</timeout>
					<url/>
					<query_fields/>
					<posts/>
					<status_codes>200</status_codes>
					<follow_redirects>1</follow_redirects>
					<post_type>0</post_type>
					<http_proxy/>
					<headers/>
					<retrieve_mode>0</retrieve_mode>
					<request_method>1</request_method>
					<output_format>0</output_format>
					<allow_traps>0</allow_traps>
					<ssl_cert_file/>
					<ssl_key_file/>
					<ssl_key_password/>
					<verify_peer>0</verify_peer>
					<verify_host>0</verify_host>
					<master_item/>
				</item>
				<item>
					<name>RabbitMQ Memory Alarm</name>
					<type>0</type>
					<snmp_community/>
					<snmp_oid/>
					<key>influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT max(mem_alarm) FROM rabbitmq_node WHERE namespace = '{$RABBIT_NAMESPACE}' AND time &gt;= now() - 90s&quot;]</key>
					<delay>30s</delay>
					<history>90d</history>
					<trends>365d</trends>
					<status>0</status>
					<value_type>0</value_type>
					<allowed_hosts/>
					<units/>
					<snmpv3_contextname/>
					<snmpv3_securityname/>
					<snmpv3_securitylevel>0</snmpv3_securitylevel>
					<snmpv3_authprotocol>0</snmpv3_authprotocol>
					<snmpv3_authpassphrase/>
					<snmpv3_privprotocol>0</snmpv3_privprotocol>
					<snmpv3_privpassphrase/>
					<params/>
					<ipmi_sensor/>
					<authtype>0</authtype>
					<username/>
					<password/>
					<publickey/>
					<privatekey/>
					<port/>
					<description/>
					<inventory_link>0</inventory_link>
					<applications>
						<application>
							<name>RabbitMQ</name>
						</application>
					</applications>
					<valuemap/>
					<logtimefmt/>
					<preprocessing/>
					<jmx_endpoint/>
					<timeout>3s</timeout>
					<url/>
					<query_fields/>
					<posts/>
					<status_codes>200</status_codes>
					<follow_redirects>1</follow_redirects>
					<post_type>0</post_type>
					<http_proxy/>
					<headers/>
					<retrieve_mode>0</retrieve_mode>
					<request_method>1</request_method>
					<output_format>0</output_format>
					<allow_traps>0</allow_traps>
					<ssl_cert_file/>
					<ssl_key_file/>
					<ssl_key_password/>
					<verify_peer>0</verify_peer>
					<verify_host>0</verify_host>
					<master_item/>
				</item>
				<item>
					<name>RabbitMQ Status</name>
					<type>0</type>
					<snmp_community/>
					<snmp_oid/>
					<key>influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT min(status) as last_status FROM rabbitmq_cluster_state WHERE namespace = '{$RABBIT_NAMESPACE}' AND time &gt;= now() - 90s&quot;]</key>
					<delay>30s</delay>
					<history>90d</history>
					<trends>365d</trends>
					<status>0</status>
					<value_type>0</value_type>
					<allowed_hosts/>
					<units/>
					<snmpv3_contextname/>
					<snmpv3_securityname/>
					<snmpv3_securitylevel>0</snmpv3_securitylevel>
					<snmpv3_authprotocol>0</snmpv3_authprotocol>
					<snmpv3_authpassphrase/>
					<snmpv3_privprotocol>0</snmpv3_privprotocol>
					<snmpv3_privpassphrase/>
					<params/>
					<ipmi_sensor/>
					<authtype>0</authtype>
					<username/>
					<password/>
					<publickey/>
					<privatekey/>
					<port/>
					<description/>
					<inventory_link>0</inventory_link>
					<applications>
						<application>
							<name>RabbitMQ</name>
						</application>
					</applications>
					<valuemap/>
					<logtimefmt/>
					<preprocessing/>
					<jmx_endpoint/>
					<timeout>3s</timeout>
					<url/>
					<query_fields/>
					<posts/>
					<status_codes>200</status_codes>
					<follow_redirects>1</follow_redirects>
					<post_type>0</post_type>
					<http_proxy/>
					<headers/>
					<retrieve_mode>0</retrieve_mode>
					<request_method>1</request_method>
					<output_format>0</output_format>
					<allow_traps>0</allow_traps>
					<ssl_cert_file/>
					<ssl_key_file/>
					<ssl_key_password/>
					<verify_peer>0</verify_peer>
					<verify_host>0</verify_host>
					<master_item/>
				</item>
			</items>
			<discovery_rules/>
			<httptests/>
			<macros>
				<macro>
					<macro>{$CLOUD_DB}</macro>
					<value>fill_me</value>
				</macro>
				<macro>
					<macro>{$RABBIT_NAMESPACE}</macro>
					<value>fiil_me</value>
				</macro>
			</macros>
			<templates/>
			<screens/>
			<tags/>
		</template>
	</templates>
	<triggers>
		<trigger>
			<expression>{RabbitMQ:influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT min(status) as last_status FROM rabbitmq_cluster_state WHERE namespace = '{$RABBIT_NAMESPACE}' AND time &gt;= now() - 90s&quot;].last()}&gt;0 and
{RabbitMQ:influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT min(status) as last_status FROM rabbitmq_cluster_state WHERE namespace = '{$RABBIT_NAMESPACE}' AND time &gt;= now() - 90s&quot;].last()}&lt;1</expression>
			<recovery_mode>0</recovery_mode>
			<recovery_expression/>
			<name>RabbitMQ Cluster is degrated on {HOST.NAME}</name>
			<correlation_mode>0</correlation_mode>
			<correlation_tag/>
			<url/>
			<status>0</status>
			<priority>3</priority>
			<description/>
			<type>0</type>
			<manual_close>0</manual_close>
			<dependencies/>
			<tags/>
		</trigger>
		<trigger>
			<expression>{RabbitMQ:influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT min(status) as last_status FROM rabbitmq_cluster_state WHERE namespace = '{$RABBIT_NAMESPACE}' AND time &gt;= now() - 90s&quot;].last()}=0</expression>
			<recovery_mode>0</recovery_mode>
			<recovery_expression/>
			<name>RabbitMQ Cluster is down on {HOST.NAME}</name>
			<correlation_mode>0</correlation_mode>
			<correlation_tag/>
			<url/>
			<status>0</status>
			<priority>4</priority>
			<description/>
			<type>0</type>
			<manual_close>0</manual_close>
			<dependencies/>
			<tags/>
		</trigger>
		<trigger>
			<expression>{RabbitMQ:influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT max(disk_free_alarm) FROM rabbitmq_node WHERE namespace = '{$RABBIT_NAMESPACE}' AND  time &gt;= now() - 90s&quot;].last()} = 1</expression>
			<recovery_mode>0</recovery_mode>
			<recovery_expression/>
			<name>RabbitMQ Disk Free Alarm on {HOST.NAME}</name>
			<correlation_mode>0</correlation_mode>
			<correlation_tag/>
			<url/>
			<status>0</status>
			<priority>4</priority>
			<description/>
			<type>0</type>
			<manual_close>0</manual_close>
			<dependencies/>
			<tags/>
		</trigger>
		<trigger>
			<expression>{RabbitMQ:influxdb.bridge[{$CLOUD_DB},&quot;select&quot;,&quot;SELECT max(mem_alarm) FROM rabbitmq_node WHERE namespace = '{$RABBIT_NAMESPACE}' AND time &gt;= now() - 90s&quot;].last()}=1</expression>
			<recovery_mode>0</recovery_mode>
			<recovery_expression/>
			<name>RabbitMQ Memory Alarm on {HOST.NAME}</name>
			<correlation_mode>0</correlation_mode>
			<correlation_tag/>
			<url/>
			<status>0</status>
			<priority>3</priority>
			<description/>
			<type>0</type>
			<manual_close>0</manual_close>
			<dependencies/>
			<tags/>
		</trigger>
	</triggers>
</zabbix_export>
